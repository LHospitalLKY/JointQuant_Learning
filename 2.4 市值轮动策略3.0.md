# 市值轮动策略3.0
本部分在市值轮动策略2.0的基础上更进一步，介绍了按分钟止损、行业与概念股、根据大盘调整持仓水平、
获取行情、技术指标库、性能分析和归因分析等。

## 分钟级止损
为了更及时地止损，我们需要每天每分钟地进行止损判断。在之前代码中，止损和交易是放在daliy中运行，
而此时要让交易按天进行，而止损是按分钟进行操作，因此就要将止损单独作为一个函数插入initialize中。

JQ中有着通过run_daily函数可以很方便地调整周期，run_daily函数中的第二个参数有多个值，其中，
'every_bar'表示按照当前周期循环，'before_open'表示每日开盘循环。

## 行业股、概念股
原本的选股策略是在整个A股中选股，但是如果我们想要在某个行业或者概念中选股，该怎么办？其实只要换
一个函数，就可以从某个行业和概念中选择股票了。

从行业中选股
```python
get_industry_stocks()
```

从概念中选股
```python
get_concept_stocks()
```


## 根据大盘指数行情调整策略
个股会受到市场整体的好坏影响，因此我们需要根据大盘情况调整持仓水平。大盘好时，增加持仓，大盘不好
时，减少持仓。

我们选择这样一个大盘函数：
> 如果沪深300指数大于20日均线，返回满仓操作信号；
> 如果沪深300指数小于20日均线，返回半仓操作信号；




